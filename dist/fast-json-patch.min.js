/*! fast-json-patch, version: 3.1.1 */
var jsonpatch=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */
var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function o(e,t){return!(0===e&&""===t||0===t&&""===e)&&(e==t||null!=e&&null!=t&&(!!("object"==typeof e&&"equals"in e&&e.equals(t))||!!("object"==typeof t&&"equals"in t&&t.equals(e))))}function a(e){if(null!=e){var t=typeof e;return"string"===t?e:"number"===t||"boolean"===t||"bigint"===t?String(e):"object"===t&&"toString"in e?e.toString():String(e)}}function i(e,t,r){if(void 0===r&&(r=void 0),Array.isArray(e)&&"string"==typeof t&&-1!==t.indexOf(":")){var n=t.split(":"),a=n[0],i=n[1],u=e.findIndex(function(e){return null==a||0==a.length?e==i:o(e[a],i)});return-1===u?void 0:e[u]}return e[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.isEquals=o,t.hasSamePropertyValue=function(e,t,r){return!(null==e||null==t||!r)&&o(e[r],t[r])},t.toString=a,t.getValue=i;var u=Object.prototype.hasOwnProperty;function p(e,t){if(Array.isArray(e)&&"string"==typeof t&&-1!==t.indexOf(":")){var r=t.split(":"),n=r[0],a=r[1];return-1!==e.findIndex(function(e){return null==n||0==n.length?e==a:o(e[n],a)})}return u.call(e,t)}function s(e,t){if(void 0===t&&(t=["_id"]),null==e)return[];if(Array.isArray(e)){for(var r=new Array(e.length),n=function(n){var o=""+n,i=e[o];if(null!=i){var u=t.find(function(e){return!!i[e]});r[n]=u?u+":"+a(i[u]):"string"==typeof i||"bigint"==typeof i||"boolean"==typeof i||"number"==typeof i?":"+i:o}else r[n]=o},o=0;o<r.length;o++)n(o);return r}if(Object.keys)return Object.keys(e);var i=[];for(var u in e)p(e,u)&&i.push(u);return i}function f(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function c(e,t){var r;for(var n in e)if(p(e,n)){if(e[n]===t)return f(n)+"/";if("object"==typeof e[n]&&""!=(r=c(e[n],t)))return f(n)+"/"+r}return""}function l(e,t){var r=[e];for(var n in t){var o="object"==typeof t[n]?JSON.stringify(t[n],null,2):t[n];void 0!==o&&r.push(n+": "+o)}return r.join("\n")}t.hasOwnProperty=p,t._objectKeys=s,t._deepClone=function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},t.isInteger=function(e){for(var t,r=0,n=e.length;r<n;){if(!((t=e.charCodeAt(r))>=48&&t<=57))return!1;r++}return!0},t.escapePathComponent=f,t.unescapePathComponent=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},t._getPathRecursive=c,t.getPath=function(e,t){if(e===t)return"/";var r=c(e,t);if(""===r)throw new Error("Object not found in root");return"/"+r},t.hasUndefined=function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var r=0,n=t.length;r<n;r++)if(e(t[r]))return!0}else if("object"==typeof t)for(var o=s(t),a=o.length,u=0;u<a;u++)if(e(i(t,o[u])))return!0;return!1};var d=function(e){function t(t,r,n,o,a){var i=this.constructor,u=e.call(this,l(t,{name:r,index:n,operation:o,tree:a}))||this;return u.name=r,u.index=n,u.operation=o,u.tree=a,Object.setPrototypeOf(u,i.prototype),u.message=l(t,{name:r,index:n,operation:o,tree:a}),u}return n(t,e),t}(Error);t.PatchError=d},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.JsonPatchError=n.PatchError,t.deepClone=n._deepClone;var o={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){var o=i(r,this.path);o&&(o=n._deepClone(o));var a=u(r,{op:"remove",path:this.from}).removed;return u(r,{op:"add",path:this.path,value:a}),{newDocument:r,removed:o}},copy:function(e,t,r){var o=i(r,this.from);return u(r,{op:"add",path:this.path,value:n._deepClone(o)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:c(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}},a={add:function(e,t,r,o){var a=this;if((void 0===o&&(o=["_id"]),"string"==typeof this.value||"bigint"==typeof this.value||"boolean"==typeof this.value||"number"==typeof this.value)&&-1!==e.findIndex(function(e){return e===a.value}))return{newDocument:r,index:t};var i=o.find(function(e){return null!=a.value[e]});if(i&&-1!==e.findIndex(function(e){return n.hasSamePropertyValue(e,a.value,i)}))return{newDocument:r,index:t};return n.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:o.move,copy:o.copy,test:o.test,_get:o._get};function i(e,t){if(""==t)return e;var r={op:"_get",path:t};return u(e,r),r.value}function u(e,r,u,p,f,l,d){if(void 0===u&&(u=!1),void 0===p&&(p=!0),void 0===f&&(f=!0),void 0===l&&(l=0),void 0===d&&(d=["_id"]),u&&("function"==typeof u?u(r,0,e,r.path):s(r,0)),""===r.path){var h={newDocument:e};if("add"===r.op)return h.newDocument=r.value,h;if("replace"===r.op)return h.newDocument=r.value,h.removed=e,h;if("move"===r.op||"copy"===r.op)return h.newDocument=i(e,r.from),"move"===r.op&&(h.removed=e),h;if("test"===r.op){if(h.test=c(e,r.value),!1===h.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",l,r,e);return h.newDocument=e,h}if("remove"===r.op)return h.removed=e,h.newDocument=null,h;if("_get"===r.op)return r.value=e,h;if(u)throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",l,r,e);return h}p||(e=n._deepClone(e));var v=(r.path||"").split("/"),y=e,_=1,w=v.length,O=void 0,m=void 0,E=void 0;for(E="function"==typeof u?u:s;;){if((m=v[_])&&-1!=m.indexOf("~")&&(m=n.unescapePathComponent(m)),f&&("__proto__"==m||"prototype"==m&&_>0&&"constructor"==v[_-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(u&&void 0===O&&(void 0===n.getValue(y,m,e)?O=v.slice(0,_).join("/"):_==w-1&&(O=r.path),void 0!==O&&E(r,0,e,O)),_++,Array.isArray(y)){if("-"===m)m=y.length;else{var P=-1!==m.indexOf(":");if(u&&!n.isInteger(m)&&!P)throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",l,r,e);if(n.isInteger(m))m=~~m;else if(P){var A=m.split(":"),g=A[0],b=A[1];if(m=y.findIndex(function(e){return null==g||0==g.length?e==b:n.isEquals(e[g],b)}),u&&-1===m)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",l,r,e)}}if(_>=w){if(u&&"add"===r.op&&m>y.length)throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",l,r,e);if(!1===(h=a[r.op].call(r,y,m,e,d)).test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",l,r,e);return h}}else if(_>=w){if(!1===(h=o[r.op].call(r,y,m,e)).test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",l,r,e);return h}if(y=y[m],u&&_<w&&(!y||"object"!=typeof y))throw new t.JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",l,r,e)}}function p(e,r,o,a,i,p){if(void 0===a&&(a=!0),void 0===i&&(i=!0),void 0===p&&(p=["_id"]),o&&!Array.isArray(r))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");a||(e=n._deepClone(e));for(var s=new Array(r.length),f=0,c=r.length;f<c;f++)s[f]=u(e,r[f],o,!0,i,f,p),e=s[f].newDocument;return s.newDocument=e,s}function s(e,r,a,i){if("object"!=typeof e||null===e||Array.isArray(e))throw new t.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",r,e,a);if(!o[e.op])throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,e,a);if("string"!=typeof e.path)throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",r,e,a);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",r,e,a);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new t.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",r,e,a);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",r,e,a);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&n.hasUndefined(e.value))throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",r,e,a);if(a)if("add"==e.op){var u=e.path.split("/").length,p=i.split("/").length;if(u!==p+1&&u!==p)throw new t.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",r,e,a)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==i)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",r,e,a)}else if("move"===e.op||"copy"===e.op){var s=f([{op:"_get",path:e.from,value:void 0}],a);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new t.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",r,e,a)}}function f(e,r,o){try{if(!Array.isArray(e))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(r)p(n._deepClone(r),n._deepClone(e),o||!0);else{o=o||s;for(var a=0;a<e.length;a++)o(e[a],a,r,void 0)}}catch(e){if(e instanceof t.JsonPatchError)return e;throw e}}function c(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,o,a=Array.isArray(e),i=Array.isArray(t);if(a&&i){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!c(e[r],t[r]))return!1;return!0}if(a!=i)return!1;var u=Object.keys(e);if((n=u.length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!t.hasOwnProperty(u[r]))return!1;for(r=n;0!=r--;)if(!c(e[o=u[r]],t[o]))return!1;return!0}return e!=e&&t!=t}t.getValueByPointer=i,t.applyOperation=u,t.applyPatch=p,t.applyReducer=function(e,r,n){var o=u(e,r);if(!1===o.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",n,r,e);return o.newDocument},t.validator=s,t.validate=f,t._areEquals=c},function(e,t,r){var n=r(1);Object.assign(t,n);var o=r(3);Object.assign(t,o);var a=r(0);t.JsonPatchError=a.PatchError,t.deepClone=a._deepClone,t.escapePathComponent=a.escapePathComponent,t.unescapePathComponent=a.unescapePathComponent},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */
var n=r(0),o=r(1),a=new WeakMap,i=function(e){this.observers=new Map,this.obj=e},u=function(e,t){this.callback=e,this.observer=t};function p(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=["_id"]);var n=a.get(e.object);s(n.value,e.object,e.patches,"",t,r),e.patches.length&&o.applyPatch(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function s(e,t,r,o,a,i){if(void 0===i&&(i=["_id"]),t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var u=n._objectKeys(t,i),p=n._objectKeys(e,i),f=!1,c=p.length-1;c>=0;c--){var l=p[c],d=n.getValue(e,l,e),h=n.getValue(t,l,t);d instanceof Date&&(d=d.toISOString()),h instanceof Date&&(h=h.toISOString()),!n.hasOwnProperty(t,l)||void 0===h&&void 0!==d&&!1===Array.isArray(t)?Array.isArray(e)===Array.isArray(t)?(a&&r.push({op:"test",path:o+"/"+n.escapePathComponent(l),value:n._deepClone(d)}),r.push({op:"remove",path:o+"/"+n.escapePathComponent(l)}),f=!0):(a&&r.push({op:"test",path:o,value:e}),r.push({op:"replace",path:o,value:t}),!0):"object"==typeof d&&null!=d&&"object"==typeof h&&null!=h&&Array.isArray(d)===Array.isArray(h)?s(d,h,r,o+"/"+n.escapePathComponent(l),a,i):n.isEquals(d,h)||(!0,a&&r.push({op:"test",path:o+"/"+n.escapePathComponent(l),value:n._deepClone(d)}),r.push({op:"replace",path:o+"/"+n.escapePathComponent(l),value:n._deepClone(h)}))}if(f||u.length!=p.length)for(c=0;c<u.length;c++){l=u[c];var v=n.getValue(t,l,t);n.hasOwnProperty(e,l)||void 0===v||(Array.isArray(t)?r.push({op:"add",path:o+"/-",value:n._deepClone(v)}):r.push({op:"add",path:o+"/"+n.escapePathComponent(l),value:n._deepClone(v)}))}}}t.unobserve=function(e,t){t.unobserve()},t.observe=function(e,t,r){void 0===r&&(r=["_id"]);var o,s=function(e){return a.get(e)}(e);if(s){var f=function(e,t){return e.observers.get(t)}(s,t);o=f&&f.observer}else s=new i(e),a.set(e,s);if(o)return o;if(o={},s.value=n._deepClone(e),t){o.callback=t,o.next=null;var c=function(){p(o,!1,r)},l=function(){clearTimeout(o.next),o.next=setTimeout(c)};"undefined"!=typeof window&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return o.patches=[],o.object=e,o.unobserve=function(){p(o,!1,r),clearTimeout(o.next),function(e,t){e.observers.delete(t.callback)}(s,o),"undefined"!=typeof window&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},s.observers.set(t,new u(t,o)),o},t.generate=p,t.compare=function(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n=["_id"]);var o=[];return s(e,t,o,"",r,n),o}}]);